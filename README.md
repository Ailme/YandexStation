# YandexStation for Home Assistant

Компонент для управления Яндекс.Станцией по локальной сети. Написан за пару 
часов со всеми вытекающими.

Протестирован с Яндекс.Станцией (большой). Говорят работает с Яндекс Станцией 
Мини. Говорят не работает с Irbis и Dexp.

## Настройка

Нужны имя и пароль аккаунта Яндекс, к которому привязаны колонки. Изучите код,
если думаете, что это небезопасно.

Токен сохраняется в директории конфигов и больше не запрашивается.

```yaml
yandex_station:
  username: myuser
  password: mypass
```

Если знаете свой Oauth-токен, можно так:

```yaml
yandex_station:
  token: abcdefghijklmnopqrstuvwxyz
```

## Пример использования

Компонент создаёт сервис `yandex_station.send_command`, которому необходимо 
передать IP станции и команду.

Если станций у аккаунта больше одной - нужно дополнительно передать `device` 
равный `id` или названию станции.

В обновлении компонента можно будет получить IP-станции автоматически (не успел 
реализовать). 

```yaml
service:
  yandex_tts:
    alias: TTS на Яндекс.Станции
    sequence:
      - service: yandex_station.send_command
        data:
          host: 192.168.1.123
          command: sendText
          text: Повтори за мной 'Тестовое уведомление'
```

Полезные команды станции можно узнать [тут](https://documenter.getpostman.com/view/525400/SWLfd8et?version=latest).

Самая универсальная - это `sendText`. Станция выполнит посланную фразу, как 
буд-то услышала команду голосом. Можно включить музыку, управлять умным домом, 
просить станцию что-то произнести (TTS голосом Алисы!).

## Полезные ссылки

- https://github.com/sergejey/majordomo-yadevices
- https://github.com/anVlad11/dd-alicization